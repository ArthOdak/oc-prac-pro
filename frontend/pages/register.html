<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/register.css">
    
    <title>OC-Travels</title>
</head>
<body>
    
<div class="wrapper">
    
    <div class="quote-wrapper">
      <blockquote>
        <p>
          "Paradise isn't a place. <br>
            It's a feeling"
        </p>
        <p class="author">- L. Boyer</p>
      </blockquote>
    </div> <!-- end quote-wrapper -->
  
    <div class="form-wrapper">
      <h1 class="form-title">Sign up</h1>
  
      <form action="" id="myForm">
        <div class="form-group">
          <label for="name">Name</label>
          <input type="text"  id="name" name="name"   class="w-100" autofocus >
          <span class="check-icon"></span>
        </div>
  
        <div class="form-group">
          <label for="email">Email Address</label>
          <input type="email" name="email" id="email" class="w-100">
          <span class="check-icon"></span>
        </div>
  
        <div class="form-group mb-1">
          <label for="password">Password</label>
          <input type="password" name="password" id="password" class="w-100">
          <span class="check-icon"></span>
        </div><br>
        <br>
        <div class="form-group mb-1">
          <label for="age">Age</label>
          <input type="number" id="age" name="age" class="w-100">
          <span class="check-icon"></span>
        </div><br>
        <br>
        <div class="form-group mb-1">
          <label for="gender">Gender</label>
          <input type="text"  id="gender" name="gender" class="w-100">
          <span class="check-icon"></span>
        </div>
  
        <div class="form-group text-left mb-2"></div>
  
        <div class="form-group mb-0">
          <input type="submit" value="Create account" class="w-100"  id="postSubmit" >
        </div>
        
      <small>Have an account? <a href="./login.html">Click here</a></small>
      </form>
  
    </div> <!-- end form-wrapper -->
  </div> <!-- end wrapper -->
</body>
<script src="../js/register.js"></script>
<script>
  var email = sessionStorage.getItem('email');
  if(email!="")
  {
      window.location.href = "./index.html";
  }
              const thisForm = document.getElementById('myForm');
              thisForm.addEventListener('submit', async function (e) {
                  e.preventDefault();
                  const formData = new FormData(thisForm).entries()
                  var new_var= JSON.stringify(Object.fromEntries(formData));
                  const response = await fetch('https://7xxq065zvj.execute-api.us-east-1.amazonaws.com/dev/authres', {
                      method: 'POST',
                      mode:"no-cors",
                      headers:{
                          'Content-Type':'application/json',
                          'Access-Control-Allow-Origin':'*'
                      },
                      body: new_var
                  });
                  
                  sessionStorage.setItem("email", document.getElementById('email').value);
                  sessionStorage.setItem("name", document.getElementById('name').value);
                  window.location.href = "./index.html";
              })

</script>
</html>